4:24 AM [express] Access code manager initialized successfully
🔍 Cache miss - fetching fresh URLs for campaign ID: 2
🔍 Cache miss - fetching fresh URLs for campaign ID: 1
🔍 DEBUG: Updating Gmail config with autoDeleteMinutes: undefined
🔍 DEBUG: Updated Gmail config autoDeleteMinutes is now: 2
🔍 DEBUG: Saving Gmail config with campaignAssignments: [{"campaignId":1,"minClickLimit":1,"maxClickLimit":1000,"active":true},{"campaignId":2,"minClickLimit":1001,"maxClickLimit":10000000000,"active":true}]
🔍 DEBUG: Saved config with autoDeleteMinutes: 2
10:24:24 AM [gmail-reader] SMTP connection verified successfully
10:24:24 AM [gmail-reader] Gmail credentials verified successfully, starting reader...
10:24:24 AM [gmail-reader] 📧 Starting Gmail reader with auto-delete enabled: 2 minutes
10:24:24 AM [gmail-reader] Gmail reader started successfully and monitoring emails from help@donot-reply.in
🔍 DEBUG: Found TrafficStar API key in environment variables, ensuring it is saved in database
[connection] Connected to host
<= '* OK Gimap ready for requests from 34.127.83.21 t7mb204274544pjw'
=> 'A0 CAPABILITY'
<= '* CAPABILITY IMAP4rev1 UNSELECT IDLE NAMESPACE QUOTA ID XLIST CHILDREN X-GM-EXT-1 XYZZY SASL-IR AUTH=XOAUTH2 AUTH=PLAIN AUTH=PLAIN-CLIENTTOKEN AUTH=OAUTHBEARER'
<= 'A0 OK Thats all she wrote! t7mb204274544pjw'
=> 'A1 LOGIN "compaignwalabhai@gmail.com" "hciuemplthdkwfho"'
🔍 DEBUG: TrafficStar API key already saved in database
Scheduling TrafficStar spent value updates every 30 minutes
Running scheduled update of TrafficStar campaign spent values
TrafficStar spent value updates scheduled successfully
🔍 DEBUG: Successfully scheduled TrafficStar spent value updates
10:24:24 AM [express] TrafficStar API initialized successfully
Initializing Traffic Generator scheduler
Running initial traffic generator check on startup
Running Traffic Generator for all enabled campaigns
Traffic Generator scheduler initialized successfully
10:24:24 AM [express] Traffic Generator scheduler initialized successfully
🚀 Initializing independent worker system for traffic management
🚀 Initializing independent workers for traffic management
🚀 Starting independent worker: spent-value-checker
⚡ Running spent-value-checker worker immediately on startup
💰 Running independent spent value check
🔍 Running independent spent value checks for all campaigns
🚀 Starting independent worker: url-threshold-checker
⚡ Running url-threshold-checker worker immediately on startup
📊 Running independent URL threshold check
🔍 Running independent URL threshold checks for all campaigns
🚀 Starting independent worker: empty-url-checker
⚡ Running empty-url-checker worker immediately on startup
🔍 Running independent empty URL check
🔍 Running independent empty URL checks for all campaigns
🚀 Starting independent worker: status-monitor
⚡ Running status-monitor worker immediately on startup
🔄 Running independent status monitoring checks
🔍 Running independent campaign status monitoring checks
✅ All independent workers started successfully
✅ Independent worker system started successfully
10:24:24 AM [express] Independent worker system initialized successfully
10:24:24 AM [express] Budget update scheduler initialized successfully
[youtube-api] INFO: YouTube API checks scheduled with dynamic timing
10:24:24 AM [express] YouTube API service initialized successfully
❌ Error in worker spent-value-checker during initial run: TypeError: db.sql is not a function
    at processSpentValueChecks (/home/runner/workspace/server/independent-processing.ts:41:12)
    at IndependentWorker.task (/home/runner/workspace/server/independent-worker-scheduler.ts:40:13)
    at IndependentWorker.start (/home/runner/workspace/server/independent-worker.ts:38:20)
    at initializeIndependentWorkers (/home/runner/workspace/server/independent-worker-scheduler.ts:89:25)
    at initializeIndependentWorkerSystem (/home/runner/workspace/server/integrate-independent-workers.ts:22:5)
    at Server.<anonymous> (/home/runner/workspace/server/index.ts:206:9)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
❌ Error in worker url-threshold-checker during initial run: TypeError: db.sql is not a function
    at processUrlThresholdChecks (/home/runner/workspace/server/independent-processing.ts:354:12)
    at IndependentWorker.task (/home/runner/workspace/server/independent-worker-scheduler.ts:52:13)
    at IndependentWorker.start (/home/runner/workspace/server/independent-worker.ts:38:20)
    at initializeIndependentWorkers (/home/runner/workspace/server/independent-worker-scheduler.ts:90:22)
    at initializeIndependentWorkerSystem (/home/runner/workspace/server/integrate-independent-workers.ts:22:5)
    at Server.<anonymous> (/home/runner/workspace/server/index.ts:206:9)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
❌ Error in worker empty-url-checker during initial run: TypeError: db.sql is not a function
    at processEmptyUrlChecks (/home/runner/workspace/server/independent-processing.ts:558:12)
    at IndependentWorker.task (/home/runner/workspace/server/independent-worker-scheduler.ts:64:13)
    at IndependentWorker.start (/home/runner/workspace/server/independent-worker.ts:38:20)
    at initializeIndependentWorkers (/home/runner/workspace/server/independent-worker-scheduler.ts:91:18)
    at initializeIndependentWorkerSystem (/home/runner/workspace/server/integrate-independent-workers.ts:22:5)
    at Server.<anonymous> (/home/runner/workspace/server/index.ts:206:9)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
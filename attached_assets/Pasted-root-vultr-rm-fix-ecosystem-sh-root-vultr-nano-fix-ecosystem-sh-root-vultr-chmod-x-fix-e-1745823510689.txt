root@vultr:~# rm fix-ecosystem.sh
root@vultr:~# nano fix-ecosystem.sh
root@vultr:~# chmod +x fix-ecosystem.sh
./fix-ecosystem.sh
╔══════════════════════════════════════════════════════════════╗
║           FIX ECOSYSTEM CONFIG AND START APP                 ║
╚══════════════════════════════════════════════════════════════╝

📝 Creating direct start script...
✓ Created direct start script
📝 Creating ES-compatible ecosystem config...
✓ Created ES-compatible ecosystem config
🚀 Starting application with the new configuration...
Attempting direct start with Node.js...
Direct start failed, trying with PM2 and ecosystem config...
[PM2][WARN] Applications url-campaign not running, starting...
[PM2] App [url-campaign] launched (1 instances)
┌────┬─────────────────┬─────────────┬─────────┬─────────┬──────────┬────────┬──────┬───────────┬──────────┬──────────┬──────────┬──────────┐
│ id │ name            │ namespace   │ version │ mode    │ pid      │ uptime │ ↺    │ status    │ cpu      │ mem      │ user     │ watching │
├────┼─────────────────┼─────────────┼─────────┼─────────┼──────────┼────────┼──────┼───────────┼──────────┼──────────┼──────────┼──────────┤
│ 0  │ url-campaign    │ default     │ 1.0.0   │ fork    │ 3369     │ 0s     │ 0    │ online    │ 0%       │ 33.2mb   │ root     │ disabled │
└────┴─────────────────┴─────────────┴─────────┴─────────┴──────────┴────────┴──────┴───────────┴──────────┴──────────┴──────────┴──────────┘
[PM2] Saving current process list...
[PM2] Successfully saved in /root/.pm2/dump.pm2
✓ Application started and PM2 configuration saved
📋 Verifying application status...
┌────┬─────────────────┬─────────────┬─────────┬─────────┬──────────┬────────┬──────┬───────────┬──────────┬──────────┬──────────┬──────────┐
│ id │ name            │ namespace   │ version │ mode    │ pid      │ uptime │ ↺    │ status    │ cpu      │ mem      │ user     │ watching │
├────┼─────────────────┼─────────────┼─────────┼─────────┼──────────┼────────┼──────┼───────────┼──────────┼──────────┼──────────┼──────────┤
│ 0  │ url-campaign    │ default     │ 1.0.0   │ fork    │ 3369     │ 0s     │ 0    │ online    │ 0%       │ 63.9mb   │ root     │ disabled │
└────┴─────────────────┴─────────────┴─────────┴─────────┴──────────┴────────┴──────┴───────────┴──────────┴──────────┴──────────┴──────────┘
📝 Creating a direct start script for PM2...
✓ Created direct start script for PM2
📝 Setting up fallback method...
[PM2] Applying action deleteProcessId on app [url-campaign](ids: [ 0 ])
[PM2] [url-campaign](0) ✓
┌────┬───────────┬─────────────┬─────────┬─────────┬──────────┬────────┬──────┬───────────┬──────────┬──────────┬──────────┬──────────┐
│ id │ name      │ namespace   │ version │ mode    │ pid      │ uptime │ ↺    │ status    │ cpu      │ mem      │ user     │ watching │
└────┴───────────┴─────────────┴─────────┴─────────┴──────────┴────────┴──────┴───────────┴──────────┴──────────┴──────────┴──────────┘
[PM2] Starting /var/www/url-campaign/direct-start.cjs in fork_mode (1 instance)
[PM2] Done.
┌────┬─────────────────┬─────────────┬─────────┬─────────┬──────────┬────────┬──────┬───────────┬──────────┬──────────┬──────────┬──────────┐
│ id │ name            │ namespace   │ version │ mode    │ pid      │ uptime │ ↺    │ status    │ cpu      │ mem      │ user     │ watching │
├────┼─────────────────┼─────────────┼─────────┼─────────┼──────────┼────────┼──────┼───────────┼──────────┼──────────┼──────────┼──────────┤
│ 0  │ url-campaign    │ default     │ 1.0.0   │ fork    │ 3411     │ 0s     │ 0    │ online    │ 0%       │ 3.4mb    │ root     │ disabled │
└────┴─────────────────┴─────────────┴─────────┴─────────┴──────────┴────────┴──────┴───────────┴──────────┴──────────┴──────────┴──────────┘
[PM2] Saving current process list...
[PM2] Successfully saved in /root/.pm2/dump.pm2
✓ Application started with fallback method
🔍 Verifying application is running...
┌────┬─────────────────┬─────────────┬─────────┬─────────┬──────────┬────────┬──────┬───────────┬──────────┬──────────┬──────────┬──────────┐
│ id │ name            │ namespace   │ version │ mode    │ pid      │ uptime │ ↺    │ status    │ cpu      │ mem      │ user     │ watching │
├────┼─────────────────┼─────────────┼─────────┼─────────┼──────────┼────────┼──────┼───────────┼──────────┼──────────┼──────────┼──────────┤
│ 0  │ url-campaign    │ default     │ 1.0.0   │ fork    │ 3411     │ 0s     │ 0    │ online    │ 0%       │ 50.0mb   │ root     │ disabled │
└────┴─────────────────┴─────────────┴─────────┴─────────┴──────────┴────────┴──────┴───────────┴──────────┴──────────┴──────────┴──────────┘
✓ Application is running successfully
╔══════════════════════════════════════════════════════════════╗
║                   ECOSYSTEM FIX COMPLETED                    ║
╚══════════════════════════════════════════════════════════════╝

✓ Application startup has been fixed
✓ PM2 configuration has been updated

Your site should now be accessible at: https://views.yoyoprime.com

If you still encounter issues:
1. Check the application logs: pm2 logs url-campaign
2. Check Nginx error logs: tail -f /var/log/nginx/error.log
3. Verify the application is running: pm2 list

If you need to restore your previous version:
cp -r /root/url-campaign-backup-*/* /var/www/url-campaign/
sudo -u postgres psql postgres < /root/url-campaign-backup-*/database-*.sql
pm2 restart url-campaign
